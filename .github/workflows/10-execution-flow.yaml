name: 10 - controlling the execution flow
on:
  workflow_dispatch:
    inputs:
      pass-unit-test: 
        type: boolean
        default: false
jobs:
  lint-build:
    runs-on: ubuntu-latest
    steps:
      - name: Lint and Build
        run: echo "Linting and Building the code..."
  unit-test:
    runs-on: ubuntu-latest
    steps:
      - name: Run Unit Tests
        run: echo "Running unit tests..."
      - name: Failing tests
        if: ${{ !inputs.pass-unit-test }}
        run: exit 1
  deploy-nonprod:
    runs-on: ubuntu-latest
    needs: [lint-build, unit-test]
    steps:
      - name: Deploy to Non-Prod
        run: echo "Deploying to non-production environment..."
  e2e-test:
    runs-on: ubuntu-latest
    needs: deploy-nonprod
    steps:
      - name: Run End-to-End Tests
        run: echo "Running end-to-end tests..."
  load-test:
    runs-on: ubuntu-latest
    needs: deploy-nonprod
    steps:
      - name: Run Load Tests
        run: echo "Running load tests..."
  deploy-prod:
    runs-on: ubuntu-latest
    needs: [e2e-test, load-test]
    steps:
      - name: Deploy to Production
        run: echo "Deploying to production environment..."